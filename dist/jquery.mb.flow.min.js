/*jquery.mb.flow 16-04-2021
 _ jquery.mb.components 
 _ email: matbicoc@gmail.com 
 _ Copyright (c) 2001-2021. Matteo Bicocchi (Pupunzi); 
 _ blog: http://pupunzi.open-lab.com 
 _ Open Lab s.r.l., Florence - Italy 
 */

import{Board}from"../classes/Board.js";window.board=new Board,function(e){e.flow={}}(jQuery,document);var nAgt=navigator.userAgent;function isTouchSupported(){var e=nAgt.msMaxTouchPoints,r="ontouchstart"in document.createElement("div");return!(!e&&!r)}jQuery.browser=jQuery.browser||{},jQuery.browser.mozilla=!1,jQuery.browser.webkit=!1,jQuery.browser.opera=!1,jQuery.browser.safari=!1,jQuery.browser.chrome=!1,jQuery.browser.androidStock=!1,jQuery.browser.msie=!1,jQuery.browser.edge=!1,jQuery.browser.ua=nAgt;var nameOffset,verOffset,ix,start,end,getOS=function(){var e={version:"Unknown version",name:"Unknown OS"};return-1!=navigator.appVersion.indexOf("Win")&&(e.name="Windows"),-1!=navigator.appVersion.indexOf("Mac")&&navigator.appVersion.indexOf("Mobile")<0&&(e.name="Mac"),-1!=navigator.appVersion.indexOf("Linux")&&(e.name="Linux"),/Mac OS X/.test(nAgt)&&!/Mobile/.test(nAgt)&&(e.version=/Mac OS X ([\._\d]+)/.exec(nAgt)[1],e.version=e.version.replace(/_/g,".").substring(0,5)),/Windows/.test(nAgt)&&(e.version="Unknown.Unknown"),/Windows NT 5.1/.test(nAgt)&&(e.version="5.1"),/Windows NT 6.0/.test(nAgt)&&(e.version="6.0"),/Windows NT 6.1/.test(nAgt)&&(e.version="6.1"),/Windows NT 6.2/.test(nAgt)&&(e.version="6.2"),/Windows NT 10.0/.test(nAgt)&&(e.version="10.0"),/Linux/.test(nAgt)&&/Linux/.test(nAgt)&&(e.version="Unknown.Unknown"),e.name=e.name.toLowerCase(),e.major_version="Unknown",e.minor_version="Unknown","Unknown.Unknown"!=e.version&&(e.major_version=parseFloat(e.version.split(".")[0]),e.minor_version=parseFloat(e.version.split(".")[1])),e};function uncamel(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function setUnit(e,r){return"string"!=typeof e||e.match(/^[\-0-9\.]+jQuery/)?""+e+r:e}function setFilter(e,r,t){var n=uncamel(r),s=jQuery.mbBrowser.mozilla?"":jQuery.CSS.sfx;e[s+"filter"]=e[s+"filter"]||"",t=setUnit(t>jQuery.CSS.filters[r].max?jQuery.CSS.filters[r].max:t,jQuery.CSS.filters[r].unit),e[s+"filter"]+=n+"("+t+") ",delete e[r]}jQuery.browser.os=getOS(),jQuery.browser.hasTouch=isTouchSupported(),jQuery.browser.name=navigator.appName,jQuery.browser.fullVersion=""+parseFloat(navigator.appVersion),jQuery.browser.majorVersion=parseInt(navigator.appVersion,10),-1!=(verOffset=nAgt.indexOf("Opera"))?(jQuery.browser.opera=!0,jQuery.browser.name="Opera",jQuery.browser.fullVersion=nAgt.substring(verOffset+6),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8))):-1!=(verOffset=nAgt.indexOf("OPR"))?(jQuery.browser.opera=!0,jQuery.browser.name="Opera",jQuery.browser.fullVersion=nAgt.substring(verOffset+4)):-1!=(verOffset=nAgt.indexOf("MSIE"))?(jQuery.browser.msie=!0,jQuery.browser.name="Microsoft Internet Explorer",jQuery.browser.fullVersion=nAgt.substring(verOffset+5)):-1!=nAgt.indexOf("Trident")?(jQuery.browser.msie=!0,jQuery.browser.name="Microsoft Internet Explorer",start=nAgt.indexOf("rv:")+3,jQuery.browser.fullVersion=nAgt.substring(start,end=start+4)):-1!=(verOffset=nAgt.indexOf("Edge"))?(jQuery.browser.edge=!0,jQuery.browser.name="Microsoft Edge",jQuery.browser.fullVersion=nAgt.substring(verOffset+5)):-1!=(verOffset=nAgt.indexOf("Chrome"))?(jQuery.browser.webkit=!0,jQuery.browser.chrome=!0,jQuery.browser.name="Chrome",jQuery.browser.fullVersion=nAgt.substring(verOffset+7)):-1<nAgt.indexOf("mozilla/5.0")&&-1<nAgt.indexOf("android ")&&-1<nAgt.indexOf("applewebkit")&&!(-1<nAgt.indexOf("chrome"))?(verOffset=nAgt.indexOf("Chrome"),jQuery.browser.webkit=!0,jQuery.browser.androidStock=!0,jQuery.browser.name="androidStock",jQuery.browser.fullVersion=nAgt.substring(verOffset+7)):-1!=(verOffset=nAgt.indexOf("Safari"))||-1!=(verOffset=nAgt.indexOf("AppleWebkit"))?(jQuery.browser.webkit=!0,jQuery.browser.safari=!0,jQuery.browser.name="Safari",jQuery.browser.fullVersion=nAgt.substring(verOffset+7),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8))):-1!=(verOffset=nAgt.indexOf("Firefox"))?(jQuery.browser.mozilla=!0,jQuery.browser.name="Firefox",jQuery.browser.fullVersion=nAgt.substring(verOffset+8)):(nameOffset=nAgt.lastIndexOf(" ")+1)<(verOffset=nAgt.lastIndexOf("/"))&&(jQuery.browser.name=nAgt.substring(nameOffset,verOffset),jQuery.browser.fullVersion=nAgt.substring(verOffset+1),jQuery.browser.name.toLowerCase()==jQuery.browser.name.toUpperCase()&&(jQuery.browser.name=navigator.appName)),-1!=(ix=jQuery.browser.fullVersion.indexOf(";"))&&(jQuery.browser.fullVersion=jQuery.browser.fullVersion.substring(0,ix)),-1!=(ix=jQuery.browser.fullVersion.indexOf(" "))&&(jQuery.browser.fullVersion=jQuery.browser.fullVersion.substring(0,ix)),jQuery.browser.majorVersion=parseInt(""+jQuery.browser.fullVersion,10),isNaN(jQuery.browser.majorVersion)&&(jQuery.browser.fullVersion=""+parseFloat(navigator.appVersion),jQuery.browser.majorVersion=parseInt(navigator.appVersion,10)),jQuery.browser.version=jQuery.browser.majorVersion,jQuery.browser.android=/Android/i.test(nAgt),jQuery.browser.blackberry=/BlackBerry|BB|PlayBook/i.test(nAgt),jQuery.browser.ios=/iPhone|iPad|iPod|webOS/i.test(nAgt),jQuery.browser.operaMobile=/Opera Mini/i.test(nAgt),jQuery.browser.windowsMobile=/IEMobile|Windows Phone/i.test(nAgt),jQuery.browser.kindle=/Kindle|Silk/i.test(nAgt),jQuery.browser.mobile=jQuery.browser.android||jQuery.browser.blackberry||jQuery.browser.ios||jQuery.browser.windowsMobile||jQuery.browser.operaMobile||jQuery.browser.kindle,jQuery.isMobile=jQuery.browser.mobile,jQuery.isTablet=jQuery.browser.mobile&&765<jQuery(window).width(),jQuery.isAndroidDefault=jQuery.browser.android&&!/chrome/i.test(nAgt),jQuery.mbBrowser=jQuery.browser,jQuery.browser.versionCompare=function(e,r){if("stringstring"!=typeof e+typeof r)return!1;for(var t=e.split("."),n=r.split("."),s=0,o=Math.max(t.length,n.length);s<o;s++){if(t[s]&&!n[s]&&0<parseInt(t[s])||parseInt(t[s])>parseInt(n[s]))return 1;if(n[s]&&!t[s]&&0<parseInt(n[s])||parseInt(t[s])<parseInt(n[s]))return-1}return 0},jQuery.support.CSStransition=function(){var e=(document.body||document.documentElement).style;return void 0!==e.transition||void 0!==e.WebkitTransition||void 0!==e.MozTransition||void 0!==e.MsTransition||void 0!==e.OTransition}(),jQuery.CSS={name:"mb.CSSAnimate",author:"Matteo Bicocchi",version:"2.0.0",transitionEnd:"transitionEnd",sfx:"",filters:{blur:{min:0,max:100,unit:"px"},brightness:{min:0,max:400,unit:"%"},contrast:{min:0,max:400,unit:"%"},grayscale:{min:0,max:100,unit:"%"},hueRotate:{min:0,max:360,unit:"deg"},invert:{min:0,max:100,unit:"%"},saturate:{min:0,max:400,unit:"%"},sepia:{min:0,max:100,unit:"%"}},normalizeCss:function(e){var r,t,n=jQuery.extend(!0,{},e);for(r in jQuery.mbBrowser.webkit||jQuery.mbBrowser.opera?jQuery.CSS.sfx="-webkit-":jQuery.mbBrowser.mozilla?jQuery.CSS.sfx="-moz-":jQuery.mbBrowser.msie&&(jQuery.CSS.sfx="-ms-"),jQuery.CSS.sfx="",n)"transform"===r&&(n[jQuery.CSS.sfx+"transform"]=n[r],delete n[r]),"transform-origin"===r&&(n[jQuery.CSS.sfx+"transform-origin"]=e[r],delete n[r]),"filter"!==r||jQuery.mbBrowser.mozilla||(n[jQuery.CSS.sfx+"filter"]=e[r],delete n[r]),"blur"===r&&setFilter(n,"blur",e[r]),"brightness"===r&&setFilter(n,"brightness",e[r]),"contrast"===r&&setFilter(n,"contrast",e[r]),"grayscale"===r&&setFilter(n,"grayscale",e[r]),"hueRotate"===r&&setFilter(n,"hueRotate",e[r]),"invert"===r&&setFilter(n,"invert",e[r]),"saturate"===r&&setFilter(n,"saturate",e[r]),"sepia"===r&&setFilter(n,"sepia",e[r]),"x"===r&&(n[t=jQuery.CSS.sfx+"transform"]=n[t]||"",n[t]+=" translateX("+setUnit(e[r],"px")+")",delete n[r]),"y"===r&&(n[t=jQuery.CSS.sfx+"transform"]=n[t]||"",n[t]+=" translateY("+setUnit(e[r],"px")+")",delete n[r]),"z"===r&&(n[t=jQuery.CSS.sfx+"transform"]=n[t]||"",n[t]+=" translateZ("+setUnit(e[r],"px")+")",delete n[r]),"rotate"===r&&(n[t=jQuery.CSS.sfx+"transform"]=n[t]||"",n[t]+=" rotate("+setUnit(e[r],"deg")+")",delete n[r]),"rotateX"===r&&(n[t=jQuery.CSS.sfx+"transform"]=n[t]||"",n[t]+=" rotateX("+setUnit(e[r],"deg")+")",delete n[r]),"rotateY"===r&&(n[t=jQuery.CSS.sfx+"transform"]=n[t]||"",n[t]+=" rotateY("+setUnit(e[r],"deg")+")",delete n[r]),"rotateZ"===r&&(n[t=jQuery.CSS.sfx+"transform"]=n[t]||"",n[t]+=" rotateZ("+setUnit(e[r],"deg")+")",delete n[r]),"scale"===r&&(n[t=jQuery.CSS.sfx+"transform"]=n[t]||"",n[t]+=" scale("+setUnit(e[r],"")+")",delete n[r]),"scaleX"===r&&(n[t=jQuery.CSS.sfx+"transform"]=n[t]||"",n[t]+=" scaleX("+setUnit(e[r],"")+")",delete n[r]),"scaleY"===r&&(n[t=jQuery.CSS.sfx+"transform"]=n[t]||"",n[t]+=" scaleY("+setUnit(e[r],"")+")",delete n[r]),"scaleZ"===r&&(n[t=jQuery.CSS.sfx+"transform"]=n[t]||"",n[t]+=" scaleZ("+setUnit(e[r],"")+")",delete n[r]),"skew"===r&&(n[t=jQuery.CSS.sfx+"transform"]=n[t]||"",n[t]+=" skew("+setUnit(e[r],"deg")+")",delete n[r]),"skewX"===r&&(n[t=jQuery.CSS.sfx+"transform"]=n[t]||"",n[t]+=" skewX("+setUnit(e[r],"deg")+")",delete n[r]),"skewY"===r&&(n[t=jQuery.CSS.sfx+"transform"]=n[t]||"",n[t]+=" skewY("+setUnit(e[r],"deg")+")",delete n[r]),"perspective"===r&&(n[t=jQuery.CSS.sfx+"transform"]=n[t]||"",n[t]+=" perspective("+setUnit(e[r],"px")+")",delete n[r]);return n},getProp:function(e){var r,t=[];for(r in e)t.indexOf(r)<0&&t.push(uncamel(r));return t.join(",")},animate:function(a,u,l,f,c){return this.each(function(){function e(){r.called=!0,r.CSSAIsRunning=!1,t.off(jQuery.CSS.transitionEnd+"."+r.id),clearTimeout(r.timeout),t.css(jQuery.CSS.sfx+"transition",""),"function"==typeof c&&c.apply(r),"function"==typeof r.CSSqueue&&(r.CSSqueue(),r.CSSqueue=null)}var r=this,t=jQuery(this);r.id=r.id||"CSSA_"+(new Date).getTime();var n=n||{type:"noEvent"};if(r.CSSAIsRunning&&r.eventType==n.type&&!jQuery.mbBrowser.msie&&jQuery.mbBrowser.version<=9)r.CSSqueue=function(){t.CSSAnimate(a,u,l,f,c)};else if(r.CSSqueue=null,r.eventType=n.type,0!==t.length&&a){if(a=jQuery.normalizeCss(a),r.CSSAIsRunning=!0,"function"==typeof u&&(c=u,u=jQuery.fx.speeds._default),"function"==typeof l&&(f=l,l=0),"string"==typeof l&&(c=l,l=0),"function"==typeof f&&(c=f,f="cubic-bezier(0.65,0.03,0.36,0.72)"),"string"==typeof u)for(var s in jQuery.fx.speeds){if(u==s){u=jQuery.fx.speeds[s];break}u=jQuery.fx.speeds._default}if(u=u||jQuery.fx.speeds._default,"string"==typeof c&&(f=c,c=null),jQuery.support.CSStransition){(o={default:"ease",in:"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"})[f]&&(f=o[f]),t.off(jQuery.CSS.transitionEnd+"."+r.id);var o=jQuery.CSS.getProp(a),i={};jQuery.extend(i,a),i[jQuery.CSS.sfx+"transition-property"]=o,i[jQuery.CSS.sfx+"transition-duration"]=u+"ms",i[jQuery.CSS.sfx+"transition-delay"]=l+"ms",i[jQuery.CSS.sfx+"transition-timing-function"]=f,setTimeout(function(){t.one(jQuery.CSS.transitionEnd+"."+r.id,e),t.css(i)},1),r.timeout=setTimeout(function(){r.called||!c?(r.called=!1,r.CSSAIsRunning=!1):(t.css(jQuery.CSS.sfx+"transition",""),c.apply(r),r.CSSAIsRunning=!1,"function"==typeof r.CSSqueue&&(r.CSSqueue(),r.CSSqueue=null))},u+l+10)}else{for(o in a)"transform"===o&&delete a[o],"filter"===o&&delete a[o],"transform-origin"===o&&delete a[o],"auto"===a[o]&&delete a[o],"x"===o&&(n=a[o],s="left",a[s]=n,delete a[o]),"y"===o&&(n=a[o],s="top",a[s]=n,delete a[o]),"-ms-transform"!==o&&"-ms-filter"!==o||delete a[o];t.delay(l).animate(a,u,c)}}})}},jQuery.fn.CSSAnimate=jQuery.CSS.animate,jQuery.normalizeCss=jQuery.CSS.normalizeCss,jQuery.fn.css3=function(t){return this.each(function(){var e=jQuery(this),r=jQuery.normalizeCss(t);e.css(r)})},function(s){s.simpleSlider={defaults:{initialval:0,maxval:100,orientation:"h",readonly:!1,callback:!1},events:{start:s.browser.mobile?"touchstart":"mousedown",end:s.browser.mobile?"touchend":"mouseup",move:s.browser.mobile?"touchmove":"mousemove"},init:function(n){return this.each(function(){var r=this,t=s(r);t.addClass("simpleSlider"),r.opt={},s.extend(r.opt,s.simpleSlider.defaults,n),s.extend(r.opt,t.data());var e="h"===r.opt.orientation?"horizontal":"vertical",e=s("<div/>").addClass("level").addClass(e);t.prepend(e),r.level=e,t.css({cursor:"default"}),"auto"==r.opt.maxval&&(r.opt.maxval=s(r).outerWidth()),t.updateSliderVal(),r.opt.readonly||(t.on(s.simpleSlider.events.start,function(e){s.browser.mobile&&(e=e.changedTouches[0]),r.canSlide=!0,t.updateSliderVal(e),"h"===r.opt.orientation?t.css({cursor:"col-resize"}):t.css({cursor:"row-resize"}),r.lastVal=r.val,s.browser.mobile||(e.preventDefault(),e.stopPropagation())}),s(document).on(s.simpleSlider.events.move,function(e){s.browser.mobile&&(e=e.changedTouches[0]),r.canSlide&&(s(document).css({cursor:"default"}),t.updateSliderVal(e),s.browser.mobile||(e.preventDefault(),e.stopPropagation()))}).on(s.simpleSlider.events.end,function(){s(document).css({cursor:"auto"}),r.canSlide=!1,t.css({cursor:"auto"})}))})},updateSliderVal:function(e){var r,t,n=this.get(0);n.opt&&(n.opt.initialval="number"==typeof n.opt.initialval?n.opt.initialval:n.opt.initialval(n),r=s(n).outerWidth(),t=s(n).outerHeight(),n.x="object"==typeof e?e.clientX+document.body.scrollLeft-this.offset().left:"number"==typeof e?e*r/n.opt.maxval:n.opt.initialval*r/n.opt.maxval,n.y="object"==typeof e?e.clientY+document.body.scrollTop-this.offset().top:"number"==typeof e?(n.opt.maxval-n.opt.initialval-e)*t/n.opt.maxval:n.opt.initialval*t/n.opt.maxval,n.y=this.outerHeight()-n.y,n.scaleX=n.x*n.opt.maxval/r,n.scaleY=n.y*n.opt.maxval/t,n.outOfRangeX=n.scaleX>n.opt.maxval?n.scaleX-n.opt.maxval:n.scaleX<0?n.scaleX:0,n.outOfRangeY=n.scaleY>n.opt.maxval?n.scaleY-n.opt.maxval:n.scaleY<0?n.scaleY:0,n.outOfRange="h"===n.opt.orientation?n.outOfRangeX:n.outOfRangeY,n.value=void 0!==e?"h"===n.opt.orientation?n.x>=this.outerWidth()?n.opt.maxval:n.x<=0?0:n.scaleX:n.y>=this.outerHeight()?n.opt.maxval:n.y<=0?0:n.scaleY:"h"===n.opt.orientation?n.scaleX:n.scaleY,"h"===n.opt.orientation?n.level.width(Math.floor(100*n.x/r)+"%"):n.level.height(Math.floor(100*n.y/t)),n.lastVal===n.value&&("h"===n.opt.orientation&&(n.x>=this.outerWidth()||n.x<=0)||"h"!==n.opt.orientation&&(n.y>=this.outerHeight()||n.y<=0))||("function"==typeof n.opt.callback&&n.opt.callback(n),n.lastVal=n.value))}},s.fn.simpleSlider=s.simpleSlider.init,s.fn.updateSliderVal=s.simpleSlider.updateSliderVal}(jQuery),function(r){r.mbCookie={set:function(e,r,t,n){"object"==typeof r&&(r=JSON.stringify(r)),n=n?"; domain="+n:"";var s=new Date,o="";0<t&&(s.setTime(s.getTime()+864e5*t),o="; expires="+s.toGMTString()),document.cookie=e+"="+r+o+"; path=/"+n},get:function(r){r+="=";for(var e=document.cookie.split(";"),t=0;t<e.length;t++){for(var n=e[t];" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(r))try{return JSON.parse(n.substring(r.length,n.length))}catch(e){return n.substring(r.length,n.length)}}return null},remove:function(e){r.mbCookie.set(e,"",-1)}},r.mbStorage={set:function(e,r){"object"==typeof r&&(r=JSON.stringify(r)),localStorage.setItem(e,r)},get:function(r){if(!localStorage[r])return null;try{return JSON.parse(localStorage[r])}catch(e){return localStorage[r]}},remove:function(e){e?localStorage.removeItem(e):localStorage.clear()}}}(jQuery);