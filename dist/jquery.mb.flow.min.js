/*jquery.mb.flow 19-04-2021
 _ jquery.mb.components 
 _ email: matbicoc@gmail.com 
 _ Copyright (c) 2001-2021. Matteo Bicocchi (Pupunzi); 
 _ blog: http://pupunzi.open-lab.com 
 _ Open Lab s.r.l., Florence - Italy 
 */

import{FlowApp}from"../Classes/FlowApp.js";import{UI}from"../Classes/UI.js";import{ContextualMenu}from"../Classes/ContextualMenu.js";Array.prototype.delete=function(e){for(var t=0;t<this.length;t++)this[t]===e&&(this.splice(t,1),t--)},function(n){n(function(){window.flowApp=new FlowApp;var e=n.mbStorage.get("lastFlow");null!=e?flowApp.load(e):n.flow.addFlow(),n.flow.init(),window.board_list_element_menu=new ContextualMenu(".board-list-element-menu",n.flow.contextualMenu.boardListelement)}),n.flow={init:function(){n("body").on("keydown","[contenteditable]",e=>{console.debug(e.target),13===e.keyCode&&(e.preventDefault(),n(e.target).blur())})},contextualMenu:{boardListelement:[{name:"Rename",fn:function(e){e=n(e).parent().data("board-id");n.flow.editBoardName(e)}},{name:"Duplicate",fn:function(e){console.log("Duplicate",e)}},{},{name:"Delete",fn:function(e){let t=n(e).parent().data("board-id");UI.dialogue("Delete Board","Are you sure you want to delete<br><b>"+n(e).text()+"</b>?",null,null,null,"Yes","Cancel",()=>{n.flow.deleteBoard(t),flowApp.save()})}}]},addFlow:function(){UI.dialogue("Add a new Flow",null,"flowName","Flow Name",null,"Add","Cancel",function(e){flowApp.addFlow(e),n.mbStorage.set("lastFlow",flowApp.flow.id),flowApp.save(flowApp.flow.id)})},openFlow:function(){},addBoard:function(){UI.dialogue("Add a new Board",null,"boardName","Board Name",null,"Add","Cancel",function(e){flowApp.flow.addBoard(e)})},updateFlowName:function(e){flowApp.flow.updateName(e)},editBoardName:function(t){let r=n(flowApp.ui.placeholders.boardList).find("#board_"+t+" .name");r.attr({contentEditable:!0}),r.focus(),r.one("blur",()=>{let e=flowApp.flow.getBoardById(t);e._name=r.text(),flowApp.save(flowApp.flow.id),flowApp.drawer.drawBoardList()})},deleteBoard:function(e){flowApp.flow.deleteBoard(e),flowApp.drawer.drawBoardList(),flowApp.save(flowApp.flow.id)}}}(jQuery,document),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).ContextMenu=t()}(this,function(){"use strict";var e,t,r,n;e=".ContextMenu{display:none;list-style:none;margin:0;max-width:250px;min-width:125px;padding:0;position:absolute;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ContextMenu--theme-default{background-color:#fff;border:1px solid rgba(0,0,0,.2);-webkit-box-shadow:0 2px 5px rgba(0,0,0,.15);box-shadow:0 2px 5px rgba(0,0,0,.15);font-size:13px;outline:0;padding:2px 0}.ContextMenu--theme-default .ContextMenu-item{padding:6px 12px}.ContextMenu--theme-default .ContextMenu-item:focus,.ContextMenu--theme-default .ContextMenu-item:hover{background-color:rgba(0,0,0,.05)}.ContextMenu--theme-default .ContextMenu-item:focus{outline:0}.ContextMenu--theme-default .ContextMenu-divider{background-color:rgba(0,0,0,.15)}.ContextMenu.is-open{display:block}.ContextMenu-item{cursor:pointer;display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ContextMenu-divider{height:1px;margin:4px 0}",n=(t=void 0===t?{}:t).insertAt,"undefined"!=typeof document&&(r=document.head||document.getElementsByTagName("head")[0],(t=document.createElement("style")).type="text/css","top"===n&&r.firstChild?r.insertBefore(t,r.firstChild):r.appendChild(t),t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)));var o=[],i=0;function s(e,t,r){void 0===r&&(r={});var n=document.createEvent("Event");Object.keys(r).forEach(function(e){n[e]=r[e]}),n.initEvent(t,!0,!0),e.dispatchEvent(n)}function a(e,t,r){void 0===r&&(r={className:"",minimalStyling:!1}),this.selector=e,this.items=t,this.options=r,this.id=i++,this.target=null,this.create(),o.push(this)}return Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector),a.prototype.create=function(){var n=this;this.menu=document.createElement("ul"),this.menu.className="ContextMenu",this.menu.setAttribute("data-contextmenu",this.id),this.menu.setAttribute("tabindex",-1),this.menu.addEventListener("keyup",function(e){switch(e.which){case 38:n.moveFocus(-1);break;case 40:n.moveFocus(1);break;case 27:n.hide()}}),this.options.minimalStyling||this.menu.classList.add("ContextMenu--theme-default"),this.options.className&&this.options.className.split(" ").forEach(function(e){return n.menu.classList.add(e)}),this.items.forEach(function(e,t){var r=document.createElement("li");"name"in e?(r.className="ContextMenu-item",r.textContent=e.name,r.setAttribute("data-contextmenuitem",t),r.setAttribute("tabindex",0),r.addEventListener("click",n.select.bind(n,r)),r.addEventListener("keyup",function(e){13===e.which&&n.select(r)})):r.className="ContextMenu-divider",n.menu.appendChild(r)}),document.body.appendChild(this.menu),s(this.menu,"created")},a.prototype.show=function(e){this.menu.style.left=e.pageX+"px",this.menu.style.top=e.pageY+"px",this.menu.classList.add("is-open"),this.target=e.target,this.menu.focus(),e.preventDefault(),s(this.menu,"shown")},a.prototype.hide=function(){this.menu.classList.remove("is-open"),this.target=null,s(this.menu,"hidden")},a.prototype.select=function(e){e=e.getAttribute("data-contextmenuitem");this.items[e]&&this.items[e].fn(this.target),this.hide(),s(this.menu,"itemselected")},a.prototype.moveFocus=function(e){void 0===e&&(e=1);var t,r=this.menu.querySelector("[data-contextmenuitem]:focus");(t=(t=r?function e(t,r,n){t=0<(n=void 0===n?1:n)?t.nextElementSibling:t.previousElementSibling;return!t||t.matches(r)?t:e(t,r,n)}(r,"[data-contextmenuitem]",e):t)||(0<e?this.menu.querySelector("[data-contextmenuitem]:first-child"):this.menu.querySelector("[data-contextmenuitem]:last-child")))&&t.focus()},a.prototype.on=function(e,t){this.menu.addEventListener(e,t)},a.prototype.off=function(e,t){this.menu.removeEventListener(e,t)},a.prototype.destroy=function(){this.menu.parentElement.removeChild(this.menu),this.menu=null,o.splice(o.indexOf(this),1)},document.addEventListener("contextmenu",function(t){o.forEach(function(e){t.target.matches(e.selector)&&e.show(t)})}),document.addEventListener("click",function(t){o.forEach(function(e){t.target.matches('[data-contextmenu="'+e.id+'"], [data-contextmenu="'+e.id+'"] *')||e.hide()})}),a});var nAgt=navigator.userAgent;function isTouchSupported(){var e=nAgt.msMaxTouchPoints,t="ontouchstart"in document.createElement("div");return!(!e&&!t)}jQuery.browser=jQuery.browser||{},jQuery.browser.mozilla=!1,jQuery.browser.webkit=!1,jQuery.browser.opera=!1,jQuery.browser.safari=!1,jQuery.browser.chrome=!1,jQuery.browser.androidStock=!1,jQuery.browser.msie=!1,jQuery.browser.edge=!1,jQuery.browser.ua=nAgt;var nameOffset,verOffset,ix,start,end,getOS=function(){var e={version:"Unknown version",name:"Unknown OS"};return-1!=navigator.appVersion.indexOf("Win")&&(e.name="Windows"),-1!=navigator.appVersion.indexOf("Mac")&&navigator.appVersion.indexOf("Mobile")<0&&(e.name="Mac"),-1!=navigator.appVersion.indexOf("Linux")&&(e.name="Linux"),/Mac OS X/.test(nAgt)&&!/Mobile/.test(nAgt)&&(e.version=/Mac OS X ([\._\d]+)/.exec(nAgt)[1],e.version=e.version.replace(/_/g,".").substring(0,5)),/Windows/.test(nAgt)&&(e.version="Unknown.Unknown"),/Windows NT 5.1/.test(nAgt)&&(e.version="5.1"),/Windows NT 6.0/.test(nAgt)&&(e.version="6.0"),/Windows NT 6.1/.test(nAgt)&&(e.version="6.1"),/Windows NT 6.2/.test(nAgt)&&(e.version="6.2"),/Windows NT 10.0/.test(nAgt)&&(e.version="10.0"),/Linux/.test(nAgt)&&/Linux/.test(nAgt)&&(e.version="Unknown.Unknown"),e.name=e.name.toLowerCase(),e.major_version="Unknown",e.minor_version="Unknown","Unknown.Unknown"!=e.version&&(e.major_version=parseFloat(e.version.split(".")[0]),e.minor_version=parseFloat(e.version.split(".")[1])),e};function uncamel(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function setUnit(e,t){return"string"!=typeof e||e.match(/^[\-0-9\.]+jQuery/)?""+e+t:e}function setFilter(e,t,r){var n=uncamel(t),o=jQuery.browser.mozilla?"":jQuery.CSS.sfx;e[o+"filter"]=e[o+"filter"]||"",r=setUnit(r>jQuery.CSS.filters[t].max?jQuery.CSS.filters[t].max:r,jQuery.CSS.filters[t].unit),e[o+"filter"]+=n+"("+r+") ",delete e[t]}jQuery.browser.os=getOS(),jQuery.browser.hasTouch=isTouchSupported(),jQuery.browser.name=navigator.appName,jQuery.browser.fullVersion=""+parseFloat(navigator.appVersion),jQuery.browser.majorVersion=parseInt(navigator.appVersion,10),-1!=(verOffset=nAgt.indexOf("Opera"))?(jQuery.browser.opera=!0,jQuery.browser.name="Opera",jQuery.browser.fullVersion=nAgt.substring(verOffset+6),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8))):-1!=(verOffset=nAgt.indexOf("OPR"))?(jQuery.browser.opera=!0,jQuery.browser.name="Opera",jQuery.browser.fullVersion=nAgt.substring(verOffset+4)):-1!=(verOffset=nAgt.indexOf("MSIE"))?(jQuery.browser.msie=!0,jQuery.browser.name="Microsoft Internet Explorer",jQuery.browser.fullVersion=nAgt.substring(verOffset+5)):-1!=nAgt.indexOf("Trident")?(jQuery.browser.msie=!0,jQuery.browser.name="Microsoft Internet Explorer",start=nAgt.indexOf("rv:")+3,jQuery.browser.fullVersion=nAgt.substring(start,end=start+4)):-1!=(verOffset=nAgt.indexOf("Edge"))?(jQuery.browser.edge=!0,jQuery.browser.name="Microsoft Edge",jQuery.browser.fullVersion=nAgt.substring(verOffset+5)):-1!=(verOffset=nAgt.indexOf("Chrome"))?(jQuery.browser.webkit=!0,jQuery.browser.chrome=!0,jQuery.browser.name="Chrome",jQuery.browser.fullVersion=nAgt.substring(verOffset+7)):-1<nAgt.indexOf("mozilla/5.0")&&-1<nAgt.indexOf("android ")&&-1<nAgt.indexOf("applewebkit")&&!(-1<nAgt.indexOf("chrome"))?(verOffset=nAgt.indexOf("Chrome"),jQuery.browser.webkit=!0,jQuery.browser.androidStock=!0,jQuery.browser.name="androidStock",jQuery.browser.fullVersion=nAgt.substring(verOffset+7)):-1!=(verOffset=nAgt.indexOf("Safari"))||-1!=(verOffset=nAgt.indexOf("AppleWebkit"))?(jQuery.browser.webkit=!0,jQuery.browser.safari=!0,jQuery.browser.name="Safari",jQuery.browser.fullVersion=nAgt.substring(verOffset+7),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8))):-1!=(verOffset=nAgt.indexOf("Firefox"))?(jQuery.browser.mozilla=!0,jQuery.browser.name="Firefox",jQuery.browser.fullVersion=nAgt.substring(verOffset+8)):(nameOffset=nAgt.lastIndexOf(" ")+1)<(verOffset=nAgt.lastIndexOf("/"))&&(jQuery.browser.name=nAgt.substring(nameOffset,verOffset),jQuery.browser.fullVersion=nAgt.substring(verOffset+1),jQuery.browser.name.toLowerCase()==jQuery.browser.name.toUpperCase()&&(jQuery.browser.name=navigator.appName)),-1!=(ix=jQuery.browser.fullVersion.indexOf(";"))&&(jQuery.browser.fullVersion=jQuery.browser.fullVersion.substring(0,ix)),-1!=(ix=jQuery.browser.fullVersion.indexOf(" "))&&(jQuery.browser.fullVersion=jQuery.browser.fullVersion.substring(0,ix)),jQuery.browser.majorVersion=parseInt(""+jQuery.browser.fullVersion,10),isNaN(jQuery.browser.majorVersion)&&(jQuery.browser.fullVersion=""+parseFloat(navigator.appVersion),jQuery.browser.majorVersion=parseInt(navigator.appVersion,10)),jQuery.browser.version=jQuery.browser.majorVersion,jQuery.browser.android=/Android/i.test(nAgt),jQuery.browser.blackberry=/BlackBerry|BB|PlayBook/i.test(nAgt),jQuery.browser.ios=/iPhone|iPad|iPod|webOS/i.test(nAgt),jQuery.browser.operaMobile=/Opera Mini/i.test(nAgt),jQuery.browser.windowsMobile=/IEMobile|Windows Phone/i.test(nAgt),jQuery.browser.kindle=/Kindle|Silk/i.test(nAgt),jQuery.browser.mobile=jQuery.browser.android||jQuery.browser.blackberry||jQuery.browser.ios||jQuery.browser.windowsMobile||jQuery.browser.operaMobile||jQuery.browser.kindle,jQuery.isMobile=jQuery.browser.mobile,jQuery.isTablet=jQuery.browser.mobile&&765<jQuery(window).width(),jQuery.isAndroidDefault=jQuery.browser.android&&!/chrome/i.test(nAgt),jQuery.mbBrowser=jQuery.browser,jQuery.browser.versionCompare=function(e,t){if("stringstring"!=typeof e+typeof t)return!1;for(var r=e.split("."),n=t.split("."),o=0,i=Math.max(r.length,n.length);o<i;o++){if(r[o]&&!n[o]&&0<parseInt(r[o])||parseInt(r[o])>parseInt(n[o]))return 1;if(n[o]&&!r[o]&&0<parseInt(n[o])||parseInt(r[o])<parseInt(n[o]))return-1}return 0},jQuery.support.CSStransition=function(){var e=(document.body||document.documentElement).style;return void 0!==e.transition||void 0!==e.WebkitTransition||void 0!==e.MozTransition||void 0!==e.MsTransition||void 0!==e.OTransition}(),jQuery.CSS={name:"mb.CSSAnimate",author:"Matteo Bicocchi",version:"2.0.0",transitionEnd:"transitionEnd",sfx:"",filters:{blur:{min:0,max:100,unit:"px"},brightness:{min:0,max:400,unit:"%"},contrast:{min:0,max:400,unit:"%"},grayscale:{min:0,max:100,unit:"%"},hueRotate:{min:0,max:360,unit:"deg"},invert:{min:0,max:100,unit:"%"},saturate:{min:0,max:400,unit:"%"},sepia:{min:0,max:100,unit:"%"}},normalizeCss:function(e){var t,r,n=jQuery.extend(!0,{},e);for(t in jQuery.browser.webkit||jQuery.browser.opera?jQuery.CSS.sfx="-webkit-":jQuery.browser.mozilla?jQuery.CSS.sfx="-moz-":jQuery.browser.msie&&(jQuery.CSS.sfx="-ms-"),jQuery.CSS.sfx="",n)"transform"===t&&(n[jQuery.CSS.sfx+"transform"]=n[t],delete n[t]),"transform-origin"===t&&(n[jQuery.CSS.sfx+"transform-origin"]=e[t],delete n[t]),"filter"!==t||jQuery.browser.mozilla||(n[jQuery.CSS.sfx+"filter"]=e[t],delete n[t]),"blur"===t&&setFilter(n,"blur",e[t]),"brightness"===t&&setFilter(n,"brightness",e[t]),"contrast"===t&&setFilter(n,"contrast",e[t]),"grayscale"===t&&setFilter(n,"grayscale",e[t]),"hueRotate"===t&&setFilter(n,"hueRotate",e[t]),"invert"===t&&setFilter(n,"invert",e[t]),"saturate"===t&&setFilter(n,"saturate",e[t]),"sepia"===t&&setFilter(n,"sepia",e[t]),"x"===t&&(n[r=jQuery.CSS.sfx+"transform"]=n[r]||"",n[r]+=" translateX("+setUnit(e[t],"px")+")",delete n[t]),"y"===t&&(n[r=jQuery.CSS.sfx+"transform"]=n[r]||"",n[r]+=" translateY("+setUnit(e[t],"px")+")",delete n[t]),"z"===t&&(n[r=jQuery.CSS.sfx+"transform"]=n[r]||"",n[r]+=" translateZ("+setUnit(e[t],"px")+")",delete n[t]),"rotate"===t&&(n[r=jQuery.CSS.sfx+"transform"]=n[r]||"",n[r]+=" rotate("+setUnit(e[t],"deg")+")",delete n[t]),"rotateX"===t&&(n[r=jQuery.CSS.sfx+"transform"]=n[r]||"",n[r]+=" rotateX("+setUnit(e[t],"deg")+")",delete n[t]),"rotateY"===t&&(n[r=jQuery.CSS.sfx+"transform"]=n[r]||"",n[r]+=" rotateY("+setUnit(e[t],"deg")+")",delete n[t]),"rotateZ"===t&&(n[r=jQuery.CSS.sfx+"transform"]=n[r]||"",n[r]+=" rotateZ("+setUnit(e[t],"deg")+")",delete n[t]),"scale"===t&&(n[r=jQuery.CSS.sfx+"transform"]=n[r]||"",n[r]+=" scale("+setUnit(e[t],"")+")",delete n[t]),"scaleX"===t&&(n[r=jQuery.CSS.sfx+"transform"]=n[r]||"",n[r]+=" scaleX("+setUnit(e[t],"")+")",delete n[t]),"scaleY"===t&&(n[r=jQuery.CSS.sfx+"transform"]=n[r]||"",n[r]+=" scaleY("+setUnit(e[t],"")+")",delete n[t]),"scaleZ"===t&&(n[r=jQuery.CSS.sfx+"transform"]=n[r]||"",n[r]+=" scaleZ("+setUnit(e[t],"")+")",delete n[t]),"skew"===t&&(n[r=jQuery.CSS.sfx+"transform"]=n[r]||"",n[r]+=" skew("+setUnit(e[t],"deg")+")",delete n[t]),"skewX"===t&&(n[r=jQuery.CSS.sfx+"transform"]=n[r]||"",n[r]+=" skewX("+setUnit(e[t],"deg")+")",delete n[t]),"skewY"===t&&(n[r=jQuery.CSS.sfx+"transform"]=n[r]||"",n[r]+=" skewY("+setUnit(e[t],"deg")+")",delete n[t]),"perspective"===t&&(n[r=jQuery.CSS.sfx+"transform"]=n[r]||"",n[r]+=" perspective("+setUnit(e[t],"px")+")",delete n[t]);return n},getProp:function(e){var t,r=[];for(t in e)r.indexOf(t)<0&&r.push(uncamel(t));return r.join(",")},animate:function(a,u,l,f,d){return this.each(function(){function e(){t.called=!0,t.CSSAIsRunning=!1,r.off(jQuery.CSS.transitionEnd+"."+t.id),clearTimeout(t.timeout),r.css(jQuery.CSS.sfx+"transition",""),"function"==typeof d&&d.apply(t),"function"==typeof t.CSSqueue&&(t.CSSqueue(),t.CSSqueue=null)}var t=this,r=jQuery(this);t.id=t.id||"CSSA_"+(new Date).getTime();var n=n||{type:"noEvent"};if(t.CSSAIsRunning&&t.eventType==n.type&&!jQuery.browser.msie&&jQuery.browser.version<=9)t.CSSqueue=function(){r.CSSAnimate(a,u,l,f,d)};else if(t.CSSqueue=null,t.eventType=n.type,0!==r.length&&a){if(a=jQuery.normalizeCss(a),t.CSSAIsRunning=!0,"function"==typeof u&&(d=u,u=jQuery.fx.speeds._default),"function"==typeof l&&(f=l,l=0),"string"==typeof l&&(d=l,l=0),"function"==typeof f&&(d=f,f="cubic-bezier(0.65,0.03,0.36,0.72)"),"string"==typeof u)for(var o in jQuery.fx.speeds){if(u==o){u=jQuery.fx.speeds[o];break}u=jQuery.fx.speeds._default}if(u=u||jQuery.fx.speeds._default,"string"==typeof d&&(f=d,d=null),jQuery.support.CSStransition){(i={default:"ease",in:"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"})[f]&&(f=i[f]),r.off(jQuery.CSS.transitionEnd+"."+t.id);var i=jQuery.CSS.getProp(a),s={};jQuery.extend(s,a),s[jQuery.CSS.sfx+"transition-property"]=i,s[jQuery.CSS.sfx+"transition-duration"]=u+"ms",s[jQuery.CSS.sfx+"transition-delay"]=l+"ms",s[jQuery.CSS.sfx+"transition-timing-function"]=f,setTimeout(function(){r.one(jQuery.CSS.transitionEnd+"."+t.id,e),r.css(s)},1),t.timeout=setTimeout(function(){t.called||!d?(t.called=!1,t.CSSAIsRunning=!1):(r.css(jQuery.CSS.sfx+"transition",""),d.apply(t),t.CSSAIsRunning=!1,"function"==typeof t.CSSqueue&&(t.CSSqueue(),t.CSSqueue=null))},u+l+10)}else{for(i in a)"transform"===i&&delete a[i],"filter"===i&&delete a[i],"transform-origin"===i&&delete a[i],"auto"===a[i]&&delete a[i],"x"===i&&(n=a[i],o="left",a[o]=n,delete a[i]),"y"===i&&(n=a[i],o="top",a[o]=n,delete a[i]),"-ms-transform"!==i&&"-ms-filter"!==i||delete a[i];r.delay(l).animate(a,u,d)}}})}},jQuery.fn.CSSAnimate=jQuery.CSS.animate,jQuery.normalizeCss=jQuery.CSS.normalizeCss,jQuery.fn.css3=function(r){return this.each(function(){var e=jQuery(this),t=jQuery.normalizeCss(r);e.css(t)})},function(o){o.simpleSlider={defaults:{initialval:0,maxval:100,orientation:"h",readonly:!1,callback:!1},events:{start:o.browser.mobile?"touchstart":"mousedown",end:o.browser.mobile?"touchend":"mouseup",move:o.browser.mobile?"touchmove":"mousemove"},init:function(n){return this.each(function(){var t=this,r=o(t);r.addClass("simpleSlider"),t.opt={},o.extend(t.opt,o.simpleSlider.defaults,n),o.extend(t.opt,r.data());var e="h"===t.opt.orientation?"horizontal":"vertical",e=o("<div/>").addClass("level").addClass(e);r.prepend(e),t.level=e,r.css({cursor:"default"}),"auto"==t.opt.maxval&&(t.opt.maxval=o(t).outerWidth()),r.updateSliderVal(),t.opt.readonly||(r.on(o.simpleSlider.events.start,function(e){o.browser.mobile&&(e=e.changedTouches[0]),t.canSlide=!0,r.updateSliderVal(e),"h"===t.opt.orientation?r.css({cursor:"col-resize"}):r.css({cursor:"row-resize"}),t.lastVal=t.val,o.browser.mobile||(e.preventDefault(),e.stopPropagation())}),o(document).on(o.simpleSlider.events.move,function(e){o.browser.mobile&&(e=e.changedTouches[0]),t.canSlide&&(o(document).css({cursor:"default"}),r.updateSliderVal(e),o.browser.mobile||(e.preventDefault(),e.stopPropagation()))}).on(o.simpleSlider.events.end,function(){o(document).css({cursor:"auto"}),t.canSlide=!1,r.css({cursor:"auto"})}))})},updateSliderVal:function(e){var t,r,n=this.get(0);n.opt&&(n.opt.initialval="number"==typeof n.opt.initialval?n.opt.initialval:n.opt.initialval(n),t=o(n).outerWidth(),r=o(n).outerHeight(),n.x="object"==typeof e?e.clientX+document.body.scrollLeft-this.offset().left:"number"==typeof e?e*t/n.opt.maxval:n.opt.initialval*t/n.opt.maxval,n.y="object"==typeof e?e.clientY+document.body.scrollTop-this.offset().top:"number"==typeof e?(n.opt.maxval-n.opt.initialval-e)*r/n.opt.maxval:n.opt.initialval*r/n.opt.maxval,n.y=this.outerHeight()-n.y,n.scaleX=n.x*n.opt.maxval/t,n.scaleY=n.y*n.opt.maxval/r,n.outOfRangeX=n.scaleX>n.opt.maxval?n.scaleX-n.opt.maxval:n.scaleX<0?n.scaleX:0,n.outOfRangeY=n.scaleY>n.opt.maxval?n.scaleY-n.opt.maxval:n.scaleY<0?n.scaleY:0,n.outOfRange="h"===n.opt.orientation?n.outOfRangeX:n.outOfRangeY,n.value=void 0!==e?"h"===n.opt.orientation?n.x>=this.outerWidth()?n.opt.maxval:n.x<=0?0:n.scaleX:n.y>=this.outerHeight()?n.opt.maxval:n.y<=0?0:n.scaleY:"h"===n.opt.orientation?n.scaleX:n.scaleY,"h"===n.opt.orientation?n.level.width(Math.floor(100*n.x/t)+"%"):n.level.height(Math.floor(100*n.y/r)),n.lastVal===n.value&&("h"===n.opt.orientation&&(n.x>=this.outerWidth()||n.x<=0)||"h"!==n.opt.orientation&&(n.y>=this.outerHeight()||n.y<=0))||("function"==typeof n.opt.callback&&n.opt.callback(n),n.lastVal=n.value))}},o.fn.simpleSlider=o.simpleSlider.init,o.fn.updateSliderVal=o.simpleSlider.updateSliderVal}(jQuery),function(t){t.mbCookie={set:function(e,t,r,n){"object"==typeof t&&(t=JSON.stringify(t)),n=n?"; domain="+n:"";var o=new Date,i="";0<r&&(o.setTime(o.getTime()+864e5*r),i="; expires="+o.toGMTString()),document.cookie=e+"="+t+i+"; path=/"+n},get:function(t){t+="=";for(var e=document.cookie.split(";"),r=0;r<e.length;r++){for(var n=e[r];" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(t))try{return JSON.parse(n.substring(t.length,n.length))}catch(e){return n.substring(t.length,n.length)}}return null},remove:function(e){t.mbCookie.set(e,"",-1)}},t.mbStorage={set:function(e,t){"object"==typeof t&&(t=JSON.stringify(t)),localStorage.setItem(e,t)},get:function(t){if(!localStorage[t])return null;try{return JSON.parse(localStorage[t])}catch(e){return localStorage[t]}},remove:function(e){e?localStorage.removeItem(e):localStorage.clear()}}}(jQuery);